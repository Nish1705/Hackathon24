<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    

    <title>Document</title>


</head>

<body>
    <h1>This is Elon Musk</h1>
    <p>Hello</p>
    

    <script >
        function send_data(dataToSend) {
            var xhr = new XMLHttpRequest();
            var url = '/process_data';
            xhr.open('POST', url, true);
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.onreadystatechange = function() {
            if (xhr.readyState === 4 && xhr.status === 200) {
                var response = JSON.parse(xhr.responseText);
                console.log(response.message);
                }
            };
            xhr.send(JSON.stringify(dataToSend));
        }

        document.addEventListener('DOMContentLoaded', function () {
            var header1 = document.querySelectorAll("h1");
            var par = document.querySelectorAll("p");

            header1.forEach(function (h1) {
                var hoverTimeout;
                h1.addEventListener('mouseover', function () {
                    hoverTimeout = setTimeout(function () {
                        var desiredText = h1.innerText;
                        console.log(desiredText);
                        send_data(desiredText);
                    }, 500); 
            });
                h1.addEventListener('mouseout', function () {
                    // If the mouse leaves the element before 1 second, clear the timeout
                    clearTimeout(hoverTimeout);
                });
            });

            par.forEach(function (p) {
                var hoverTimeout;

                p.addEventListener('mouseover', function () {
                    hoverTimeout = setTimeout(function () {
                        var desiredText = p.innerText;
                        console.log(desiredText);
                        send_data(desiredText);
                    }, 500); 


                p.addEventListener('mouseout', function () {
                // If the mouse leaves the element before 1 second, clear the timeout
                    clearTimeout(hoverTimeout);
                });

            });
        });
        

        
    });
</script>
</body>

</html>
